---
import { allPhotos, formatCategory } from '../../data/photos';
import BaseLayout from '../../layouts/BaseLayout.astro';
import Section from '../../components/Section.astro';
import PhotoGallery from '../../components/PhotoGallery.astro';
import PhotoFilter from '../../components/PhotoFilter.astro';
import PhotoSlideshow from '../../components/PhotoSlideshow.astro';

const photos = allPhotos;
// Define featuredPhotos properly - select photos marked as featured or fall back to first 3
const featuredPhotos = allPhotos.filter(photo => photo.featured).length > 0 
  ? allPhotos.filter(photo => photo.featured) 
  : allPhotos.slice(0, 3);
const categories = [...new Set(allPhotos.map(p => p.category))].map(formatCategory);
---

<BaseLayout title="Photography | Adrian Diaz">
  <!-- Hero Section -->
  <div class="relative">
    <PhotoSlideshow photos={featuredPhotos} height="70vh" />
    
    <div class="absolute inset-0 flex items-center justify-center z-10">
      <div class="text-center text-white px-4">
        <h1 class="text-4xl md:text-5xl font-bold mb-4 tracking-tight">Photography</h1>
        <p class="text-xl max-w-2xl mx-auto text-white/90">The world through the lens of an astrophysicist</p>
      </div>
    </div>
  </div>

  <!-- Main Content -->
  <Section background="white" paddingY="large">
    <div class="mb-8">
      <PhotoFilter categories={categories} centered={true} includeAllPhotos={true} />
    </div>
    <div class="max-w-7xl mx-auto">
      <PhotoGallery photos={allPhotos} masonry={true} />
    </div>
  </Section>
</BaseLayout>
<style>
  /* Gallery hover overrides */
  .group:hover img {
    transform: none !important;
  }
  
  .group img {
    transition: none !important;
  }
  
  .group:hover .opacity-0 {
    opacity: 1 !important;
  }
  


</style>
