---
import BaseLayout from '../../../layouts/BaseLayout.astro';
import Section from '../../../components/Section.astro';
import PhotoGallery from '../../../components/PhotoGallery.astro';
import PhotoFilter from '../../../components/PhotoFilter.astro';
import { allPhotos, formatCategory } from '../../../data/photos';
import PhotoGrid from '../../../components/PhotoGrid.astro';
import PhotoCard from '../../../components/PhotoCard.astro';

export function getStaticPaths() {
  // Get all unique categories
  const categories = [...new Set(allPhotos.map(photo => photo.category))];
  
  // Create a path for each category
  return categories.map(category => {
    // Filter photos for this category
    const categoryPhotos = allPhotos.filter(photo => photo.category === category);
    
    return {
      params: { category },
      props: { 
        categoryPhotos,
        categoryTitle: formatCategory(category)
      }
    };
  });
}

// Get the category photos from props
const { categoryPhotos, categoryTitle } = Astro.props;

// Get all categories for the filter
const allCategories = [...new Set(allPhotos.map(photo => photo.category))]
  .map(formatCategory);
---

<BaseLayout title={`${categoryTitle} Photos | Adrian Diaz`}>
  <!-- Hero Section -->
  <div class="relative h-[40vh] min-h-[300px] bg-gradient-to-r from-blue-900 to-purple-900 flex items-center justify-center">
    <div class="text-center text-white px-4 z-10">
      <h1 class="text-4xl md:text-5xl font-bold mb-4 tracking-tight">{categoryTitle}</h1>
      <p class="text-xl max-w-2xl mx-auto text-white/90">
        {categoryTitle === 'Galaxies' && 'Distant islands of stars in the cosmic ocean'}
        {categoryTitle === 'Planets' && 'Our celestial neighbors in the solar system'}
        {categoryTitle === 'Nebulae' && 'Cosmic clouds of gas and dust'}
        {categoryTitle === 'Stars' && 'The building blocks of the universe'}
      </p>
    </div>
  </div>

  <!-- Main Content -->
  <Section background="white" paddingY="large">
    <div class="max-w-7xl mx-auto">
      <PhotoFilter categories={allCategories} activeCategory={categoryTitle} />
      <!-- Replace PhotoCard with PhotoGrid which you've already imported -->
      <PhotoGrid photos={categoryPhotos} />
    </div>
  </Section>
</BaseLayout>